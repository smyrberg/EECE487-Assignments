\documentclass[a4paper]{article}
\usepackage{amsmath,amssymb,amsthm}
\usepackage{bm}
\usepackage{biblatex}
\usepackage{float}
\usepackage[colorlinks=true, allcolors=black, urlcolor=cyan]{hyperref}
\usepackage{graphicx}
\usepackage{mathtools}
\usepackage[framed,numbered]{matlab-prettifier}
\usepackage{mcode}
\usepackage{physics}
\usepackage{siunitx}

\renewcommand{\thesection}{\arabic{section}}
\renewcommand{\thesubsection}{\arabic{section}.\alph{subsection}}

\setlength{\parindent}{0pt} % Disable indentation
\mathtoolsset{showonlyrefs} % Only show equation numbers on referenced equations

\def\undertilde#1{\mathord{\vtop{\ialign{##\crcr
$\hfil\displaystyle{#1}\hfil$\crcr\noalign{\kern1.5pt\nointerlineskip}
$\hfil\tilde{}\hfil$\crcr\noalign{\kern1.5pt}}}}} %Lousy way, but need this undertilde


\begin{document}

\hypersetup{pageanchor=false}
\begin{titlepage}
    \centering
    \vfill
    {\Large
        {\Large ELEC 442 - Introduction to Robotics\\}
        \vskip.5cm
        {\huge Assignment 1\\
        \vskip2cm
        Sondre Myrberg\\
        \href{mailto:sondrmyr@alumni.ubc.ca}{sondrmyr@alumni.ubc.ca}\\
        81113433\\}
    }
    \vfill
    \includegraphics[width=0.95\textwidth]{../../ubc_logo.pdf}
    \vfill
    \vfill
\end{titlepage}
\hypersetup{pageanchor=true}

\section{}  

Given the homogenous transformation
\begin{equation}
    \begin{bmatrix}
        \bm{y} \\ 1
    \end{bmatrix} = 
    \underbrace{\begin{bmatrix}
        Q & \bm{d} \\ \bm{0}^\top & 1 
    \end{bmatrix}}_{T}
    \begin{bmatrix}
        \bm{x} \\ 1
    \end{bmatrix}
\end{equation}
where $Q$ and $\bm{d}$ accounts for rotation and translation, respectively. We have that the inverse
is on the form 
\begin{equation}
        T^{-1} = \begin{bmatrix}
            \tilde{Q} & \tilde{\bm{d}} \\ \bm{0}^\top & 1
        \end{bmatrix}
\end{equation}
where we know that $T^{-1}T$ is equal to the $4\!\cross\!4$ identity matrix. This yields
\begin{equation}
    \begin{aligned}
        T^{-1}T &= \begin{bmatrix}
             \tilde{Q} & \tilde{\bm{d}} \\ \bm{0}^\top & 1
        \end{bmatrix}
        \begin{bmatrix}
            Q & \bm{d} \\ \bm{0}^\top & 1
        \end{bmatrix} \\
        &= \begin{bmatrix}
            \tilde{Q}Q & \tilde{Q}\bm{d} + \tilde{\bm{d}} \\ \bm{0}^\top & 1
        \end{bmatrix} = \mathbf{I}_{4\cross4}\\
        \implies &\begin{cases}
            \tilde{Q}Q &= \mathbf{I}_{3\cross3} \\
             \tilde{Q}\bm{d} + \tilde{\bm{d}} &= \bm{0}
        \end{cases}\\
        \implies &\begin{cases}
            \tilde{Q} &= Q^{-1} = Q^\top \\
            \tilde{\bm{d}} &= -\tilde{Q}\bm{d} = -Q^\top \bm{d}
        \end{cases}\\
        \implies T^{-1} &=\underline{ \begin{bmatrix}
            Q^\top & -Q^\top \bm{d} \\ \bm{0}^\top & 1
        \end{bmatrix}
        }
    \end{aligned}
\end{equation}

\section{}
Considering the homogenous transformation matrix

\begin{equation}
    ^0T_1 = \begin{bmatrix}
        Q & \bm{d} \\ \bm{0}^\top & 1
    \end{bmatrix}
\end{equation}
with
\begin{equation}
    Q = \underbrace{\begin{bmatrix}
        \frac{1}{\sqrt{2}} & \frac{1}{\sqrt{2}} & 0 \\
        -\frac{1}{\sqrt{2}} & \frac{1}{\sqrt{2}} & 0 \\
        0 & 0 & 1
    \end{bmatrix}}_{Q_1}
    \underbrace{\begin{bmatrix}
        1 & 0 & 0 \\
        0 & -\frac{1}{2} & -\frac{\sqrt{3}}{2} \\
        0 & \frac{\sqrt{3}}{2} & -\frac{1}{2}
    \end{bmatrix}}_{Q_2}
\end{equation}
and 
\begin{equation}
    \bm{d} = \begin{bmatrix}
        -\frac{5}{\sqrt{2}} \\ \frac{5}{\sqrt{2}} \\ 4
    \end{bmatrix} \si{\cm}
\end{equation}

\subsection{}

\subsection{}
For the point represented in coordinate system 1 by $\undertilde{\bm{x}} = \begin{bmatrix} 1&0&0 \end{bmatrix}^\top\si{\cm} $ we get the representation in system 0 given by
\begin{equation}
    \begin{aligned}
        \begin{bmatrix}
            ^0 \bm{x} \\ 1
        \end{bmatrix} &= 
        \prescript{0}{}{T}_1 \begin{bmatrix}
            ^1 \bm{x} \\ 1 
        \end{bmatrix}\\
        &= 
    \end{aligned}
\end{equation}

\section{}
A MATLAB fuction named \mcode{DH_homog} is implemented with the code shown in \autoref{lst:ex3}.
\lstinputlisting[style=Matlab-editor, caption=MATLAB code to generate homogenous transformation matrix based on the Denavit-Hartenberg convention, label=lst:ex3]{../../MATLAB/Assignment1/DH_homog.m}


\end{document}